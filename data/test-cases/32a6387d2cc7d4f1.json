{"uid":"32a6387d2cc7d4f1","name":"Verify study inspection when nitrosamine policy is Disabled","fullName":"tests.scenarios.disable_nitrosamine.test_disable_nitrosamine_policy.TestDisableNitrosamine#test_disable_nitrosamine_policy_study_inspection","historyId":"930c16c944685b01efd9c2c3ed2e1e9e","time":{"start":1733051978615,"stop":1733051978615,"duration":0},"description":"This test case tests API to verify that after nitrosamine policy is disabled, there should be no nitrosamine in study inspection","descriptionHtml":"<p>This test case tests API to verify that after nitrosamine policy is disabled, there should be no nitrosamine in study inspection</p>\n","status":"failed","statusMessage":"AssertionError: {\"error\":{\"errName\":\"DataValidationError\",\"where\":{\"domain\":\"CleaningPolicy\",\"action\":\"Modify\"},\"name\":\"Data Validation Issue\",\"errors\":[{\"children\":[],\"property\":\"enabled\",\"constraints\":{\"enabled\":\"The facility has data related Nitrosamines such as Productions, Analytical Methods, Samples.\\n          Please archive the data before disabling the Nitrosamines settings\"}}],\"message\":\"\",\"action\":\"Modify\",\"domain\":\"CleaningPolicy\"}}","statusTrace":"self = <test_disable_nitrosamine_policy.TestDisableNitrosamine object at 0x0000019F6FC82950>\n\n    @allure.title(\"This method will disable the nitrosamine policy\")\n    @pytest.fixture(scope=\"session\", autouse=True)\n    def setup_nitrosamine_policy(self):\n        global PRODUCTION_LIST\n    \n        PRODUCTION_LIST = Excel.read_excel_columns(const.get_disable_nitrosamine_policy(), \"config\",\n                                                   const.COLUMNS_PRODUCTION)\n    \n        policy_data = {\"enabled\": False}\n>       self.setup_nitro_policy(policy_data)\n\ntests\\scenarios\\disable_nitrosamine\\test_disable_nitrosamine_policy.py:61: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ntests\\scenarios\\disable_nitrosamine\\test_disable_nitrosamine_policy.py:50: in setup_nitro_policy\n    self.update_nitrosamine.test_update_nitrosamine_limit_policy(data)\ntests\\unit\\settings\\cleaning_limit_policies\\test_nitrosamine_limit_policy.py:54: in test_update_nitrosamine_limit_policy\n    status_200(response)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nresponse = <Response [422]>\n\n    def status_200(response):\n>       assert response.status_code == 200, response.text\nE       AssertionError: {\"error\":{\"errName\":\"DataValidationError\",\"where\":{\"domain\":\"CleaningPolicy\",\"action\":\"Modify\"},\"name\":\"Data Validation Issue\",\"errors\":[{\"children\":[],\"property\":\"enabled\",\"constraints\":{\"enabled\":\"The facility has data related Nitrosamines such as Productions, Analytical Methods, Samples.\\n          Please archive the data before disabling the Nitrosamines settings\"}}],\"message\":\"\",\"action\":\"Modify\",\"domain\":\"CleaningPolicy\"}}\n\nutil\\validate_response.py:3: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"login","time":{"start":1733051978615,"stop":1733051978875,"duration":260},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_facility","time":{"start":1733051978875,"stop":1733051979049,"duration":174},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"This method will disable the nitrosamine policy","time":{"start":1733051979049,"stop":1733051979715,"duration":666},"status":"failed","statusMessage":"AssertionError: {\"error\":{\"errName\":\"DataValidationError\",\"where\":{\"domain\":\"CleaningPolicy\",\"action\":\"Modify\"},\"name\":\"Data Validation Issue\",\"errors\":[{\"children\":[],\"property\":\"enabled\",\"constraints\":{\"enabled\":\"The facility has data related Nitrosamines such as Productions, Analytical Methods, Samples.\\n          Please archive the data before disabling the Nitrosamines settings\"}}],\"message\":\"\",\"action\":\"Modify\",\"domain\":\"CleaningPolicy\"}}\n","statusTrace":"  File \"C:\\Users\\yo339.DESKTOP-ESU2KLG\\PycharmProjects\\cleen-api-test-new\\venv\\Lib\\site-packages\\pluggy\\_callers.py\", line 39, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\yo339.DESKTOP-ESU2KLG\\PycharmProjects\\cleen-api-test-new\\venv\\Lib\\site-packages\\_pytest\\fixtures.py\", line 1129, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\yo339.DESKTOP-ESU2KLG\\PycharmProjects\\cleen-api-test-new\\venv\\Lib\\site-packages\\_pytest\\fixtures.py\", line 908, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\yo339.DESKTOP-ESU2KLG\\PycharmProjects\\cleen-api-test-new\\tests\\scenarios\\disable_nitrosamine\\test_disable_nitrosamine_policy.py\", line 61, in setup_nitrosamine_policy\n    self.setup_nitro_policy(policy_data)\n  File \"C:\\Users\\yo339.DESKTOP-ESU2KLG\\PycharmProjects\\cleen-api-test-new\\tests\\scenarios\\disable_nitrosamine\\test_disable_nitrosamine_policy.py\", line 50, in setup_nitro_policy\n    self.update_nitrosamine.test_update_nitrosamine_limit_policy(data)\n  File \"C:\\Users\\yo339.DESKTOP-ESU2KLG\\PycharmProjects\\cleen-api-test-new\\tests\\unit\\settings\\cleaning_limit_policies\\test_nitrosamine_limit_policy.py\", line 54, in test_update_nitrosamine_limit_policy\n    status_200(response)\n  File \"C:\\Users\\yo339.DESKTOP-ESU2KLG\\PycharmProjects\\cleen-api-test-new\\util\\validate_response.py\", line 3, in status_200\n    assert response.status_code == 200, response.text\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"tag","value":"disable_nitrosamine_policy_study_inspection"},{"name":"tag","value":"disable_nitrosamine"},{"name":"tag","value":"order('first')"},{"name":"parentSuite","value":"tests.scenarios.disable_nitrosamine"},{"name":"suite","value":"test_disable_nitrosamine_policy"},{"name":"subSuite","value":"TestDisableNitrosamine"},{"name":"host","value":"DESKTOP-ESU2KLG"},{"name":"thread","value":"23628-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.scenarios.disable_nitrosamine.test_disable_nitrosamine_policy"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"https://app.clickup.com/t/86cw39ud8","url":"https://app.clickup.com/t/86cw39ud8","type":"link"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["disable_nitrosamine_policy_study_inspection","disable_nitrosamine","order('first')"]},"source":"32a6387d2cc7d4f1.json","parameterValues":[]}