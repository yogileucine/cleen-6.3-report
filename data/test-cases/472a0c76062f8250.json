{"uid":"472a0c76062f8250","name":"Validate the conductivity residue verification final summary page for custom policy","fullName":"tests.scenarios.multi_production_protocol.protocol.test_multi_prodcution_protocol.TestMultiProductionProtocol#test_validate_final_summary_conductivity_residue_verification_details_custom","historyId":"de45fb666cb90f4a331ec08d1a198110","time":{"start":1734436670016,"stop":1734436677943,"duration":7927},"description":"This test case tests API to Create Protocol for conductivity residue verification and validate the final summary details for custom policy","descriptionHtml":"<p>This test case tests API to Create Protocol for conductivity residue verification and validate the final summary details for custom policy</p>\n","status":"failed","statusMessage":"AssertionError: Rinse Volume from protocol 1020 not equal to calculated data 1.3 for sample id EQM-3/CON-3","statusTrace":"self = <test_multi_prodcution_protocol.TestMultiProductionProtocol object at 0x7f81b899c0b0>\n\n    @allure.title(\"Validate the conductivity residue verification final summary page for custom policy\")\n    @allure.description(\"This test case tests API to Create Protocol for conductivity residue verification and \"\n                        \"validate the final summary details for custom policy\")\n    @allure.link(\"https://app.clickup.com/t/86cupfkgw\")\n    @pytest.mark.validate_final_summary_conductivity_residue_verification_details_custom\n    def test_validate_final_summary_conductivity_residue_verification_details_custom(self):\n        data = self.test_create_protocol_conductivity_residue_verification_custom()\n        no_of_runs_payload = number_of_runs_sample_limits()\n        data.update({\"no_of_runs_payload\": no_of_runs_payload})\n        self.protocol_common_method.update_protocol_residue_verification_sample_limits_run(data)\n        final_summary = self.protocol_common_method.get_active_final_summary_details(data)[\"response\"]\n        sample_limits = json.loads(final_summary)[\"result\"]\n        equipments_id = self.protocol_common_method.get_protocol_equipments_ids(data)\n    \n        data.update({\"sample_profile\": sample_limits, \"sample_type\": \"conductivity\"})\n        self.protocol_common_method.compare_the_acceptance_criteria_limits(data)\n    \n        eq_index = 0\n        for i in equipments_id:\n            data.update({\"equipment\": i[\"equipment_id\"], \"external_id\": i[\"external_id\"]})\n            data.update({\"eq_length\": eq_index})\n            eq_index += 1\n>           self.protocol_common_method.compare_samples_swab_rinse_surface_area_additional_summary(data)\n\ntests/scenarios/multi_production_protocol/protocol/test_multi_prodcution_protocol.py:4149: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndata = {'add_new_protocol_payload': {'authorId': 6, 'description': 'Automation Protocol', 'externalId': 'Protocol-4SSY', 'nam...onal_test': 'Conductivity', 'additional_test_minimum': 'conductivity_minimum', 'at_dict': {'rinse': 2, 'swab': 2}, ...}\n\n    @staticmethod\n    def compare_samples_swab_rinse_surface_area_additional_summary(data):\n        if data[\"sample_type\"] == \"atomicAdsorption\":\n            sample_type = \"AA\"\n        elif data[\"sample_type\"] == \"conductivity\":\n            sample_type = \"Conductivity\"\n        else:\n            sample_type = data[\"sample_type\"]\n        columns = [\"sample type\", \"Sampling area(sqcm)\", \"rinse_volume\", \"sample id\"]\n        if data[\"policy\"] == \"custom\":\n            sheet_name = data[\"external_id\"] + \"_samples_custom\"\n        else:\n            sheet_name = data[\"external_id\"] + \"_samples\"\n        sample_limits = Excel.read_excel_columns_name_row_value(const.get_master_data(), sheet_name, columns,\n                                                                sample_type)\n        rinse_list = [item for item in sample_limits[\"rinse_volume\"] if item != '#VALUE!']\n        swab_list = [item for item in sample_limits[\"Sampling area(sqcm)\"] if item != '#VALUE!']\n        sample_ids = [item for item in sample_limits[\"sample id\"] if item != '#VALUE!']\n        swab_area_mapping = dict(zip(sample_ids, swab_list))\n        rinse_vol_mapping = dict(zip(sample_ids, rinse_list))\n        for profile in data['sample_profile']['samplingProfiles'][data[\"eq_length\"]]['samplingProfile'].values():\n            for sample in profile['samples'].values():\n                sample_id = sample.get('externalId')\n                if sample.get('type') == sample_type and sample.get(\"externalId\") in sample_ids:\n                    surface_area = sample.get('surfaceArea')\n                    rinse_volume = sample.get('rinseVolume')\n                    if surface_area is not None:\n                        assert round(surface_area, 3) == round(swab_area_mapping[sample_id], 3), \\\n                            f\"Surface area from protocol {round(surface_area, 3)} not equal to calculated data \\\n                                {round(swab_area_mapping[sample_id], 3)} for sample id {sample.get('externalId')}\"\n    \n                    if rinse_volume is not None:\n>                       assert rinse_volume == rinse_vol_mapping[sample_id], \\\n                            (f\"Rinse Volume from protocol {rinse_volume} not equal to calculated data \"\n                             f\"{rinse_vol_mapping[sample_id]} for sample id {sample.get('externalId')}\")\nE                       AssertionError: Rinse Volume from protocol 1020 not equal to calculated data 1.3 for sample id EQM-3/CON-3\n\ntests/unit/protocols/protocol_common_method.py:252: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"login","time":{"start":1734429604694,"stop":1734429605014,"duration":320},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_facility","time":{"start":1734429605014,"stop":1734429605194,"duration":180},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"tag","value":"validate_final_summary_conductivity_residue_verification_details_custom"},{"name":"tag","value":"multi_production_protocol"},{"name":"tag","value":"scenario"},{"name":"parentSuite","value":"tests.scenarios.multi_production_protocol.protocol"},{"name":"suite","value":"test_multi_prodcution_protocol"},{"name":"subSuite","value":"TestMultiProductionProtocol"},{"name":"host","value":"ubuntu"},{"name":"thread","value":"1892009-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.scenarios.multi_production_protocol.protocol.test_multi_prodcution_protocol"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"https://app.clickup.com/t/86cupfkgw","url":"https://app.clickup.com/t/86cupfkgw","type":"link"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["multi_production_protocol","scenario","validate_final_summary_conductivity_residue_verification_details_custom"]},"source":"472a0c76062f8250.json","parameterValues":[]}