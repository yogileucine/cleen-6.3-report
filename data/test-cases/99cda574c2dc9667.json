{"uid":"99cda574c2dc9667","name":"Validate the audit logs details for delete auto selection policy","fullName":"tests.scenarios.audit_logs.test_audit_logs_scenarios.TestAuditLogsScenarios#test_validate_delete_selection_policy_audit_logs_details","historyId":"ef818b3195224721d10881388cec8cdf","time":{"start":1733031125428,"stop":1733031125712,"duration":284},"description":"This test case test API to validate the audit logs details for delete auto selection policy","descriptionHtml":"<p>This test case test API to validate the audit logs details for delete auto selection policy</p>\n","status":"failed","statusMessage":"AssertionError: Expected 'None' for new Policy, but got \nassert '' == None","statusTrace":"self = <test_audit_logs_scenarios.TestAuditLogsScenarios object at 0x0000026F8A06AED0>\n\n    @allure.title(\"Validate the audit logs details for delete auto selection policy\")\n    @allure.description(\"This test case test API to validate the audit logs details for delete auto selection policy\")\n    @allure.link(\"https://app.clickup.com/t/86cw0fg9k\")\n    @pytest.mark.validate_delete_selection_policy_audit_logs_details\n    def test_validate_delete_selection_policy_audit_logs_details(self):\n        selection_policy = self.sampling_location_assessment.test_delete_auto_selection_policy()\n        time_stamp = selection_policy[\"timestamp\"]\n    \n        audit_logs_details = self.validate_audit_logs.audit_logs_details(policy_name=\"SamplingPolicy\",\n                                                                         action=const.LOG_ACTION_DELETE)\n    \n        for index, result in enumerate(audit_logs_details.get(\"audit_logs\", {}).get(\"result\", [])):\n            response_time_stamp = result.get(\"timestamp\")\n            action_exists = result.get(\"action\") is not None\n            domain_is_additional_policy = result.get(\"domain\") == \"SamplingPolicy\"\n            audit_diff = result.get(\"diff\", {})\n    \n            if action_exists and domain_is_additional_policy:\n                self.validate_audit_logs.assert_audit_diff(audit_diff, \"Min Locations\", \"1\", None)\n>               self.validate_audit_logs.assert_audit_diff(audit_diff, \"Policy\", const.YES_NO_POLICY, None)\n\ntests\\scenarios\\audit_logs\\test_audit_logs_scenarios.py:2737: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\naudit_diff = {'ID': {'data': {'new': {'value': 'Indirect'}, 'old': {'value': 'Indirect'}}, 'type': 'updated'}, 'Min Locations': {'d...e': ''}, 'old': {'value': 'OR of the following criteria are met:1.  - Solubility is EqualTo Yes'}}, 'type': 'updated'}}\nkey = 'Policy', expected_old_value = 'OR of the following criteria are met:1.  - Solubility is EqualTo Yes', expected_new_value = None\n\n    @staticmethod\n    def assert_audit_diff(audit_diff, key, expected_old_value, expected_new_value):\n        old_value = audit_diff.get(key, {}).get(\"data\", {}).get(\"old\", {}).get(\"value\")\n        new_value = audit_diff.get(key, {}).get(\"data\", {}).get(\"new\", {}).get(\"value\")\n    \n        assert old_value == expected_old_value, f\"Expected '{expected_old_value}' for old {key}, but got {old_value}\"\n>       assert new_value == expected_new_value, f\"Expected '{expected_new_value}' for new {key}, but got {new_value}\"\nE       AssertionError: Expected 'None' for new Policy, but got \nE       assert '' == None\n\ntests\\unit\\audit_logs\\test_audit_logs.py:129: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"login","time":{"start":1733031124740,"stop":1733031125175,"duration":435},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_facility","time":{"start":1733031125176,"stop":1733031125425,"duration":249},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"tag","value":"validate_delete_selection_policy_audit_logs_details"},{"name":"tag","value":"run(order=-2)"},{"name":"tag","value":"second_to_last"},{"name":"tag","value":"audit_logs_scenarios"},{"name":"tag","value":"scenario"},{"name":"parentSuite","value":"tests.scenarios.audit_logs"},{"name":"suite","value":"test_audit_logs_scenarios"},{"name":"subSuite","value":"TestAuditLogsScenarios"},{"name":"host","value":"DESKTOP-ESU2KLG"},{"name":"thread","value":"24528-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.scenarios.audit_logs.test_audit_logs_scenarios"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"https://app.clickup.com/t/86cw0fg9k","url":"https://app.clickup.com/t/86cw0fg9k","type":"link"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["scenario","audit_logs_scenarios","validate_delete_selection_policy_audit_logs_details","second_to_last","run(order=-2)"]},"source":"99cda574c2dc9667.json","parameterValues":[]}